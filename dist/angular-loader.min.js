!function(){angular.module("anguloader",["ui.bootstrap.modal"]).value("defaultLoaderSpinner",'<i class="fa fa-spinner fa-spin fa-5x anguloader-icon"></i>').directive("anguloader",["defaultLoaderSpinner",function(defaultLoaderSpinner){return{restrict:"AEC",template:'<div ng-show="anguloader.show" class"anguloader"></div>',replace:!0,scope:{anguloaderBackdrop:"="},scope:!0,link:function(scope,element,attrs,ctrl){var backdrop="true";element.addClass("anguloader"),"undefined"!=typeof attrs.anguloaderBackdrop&&(backdrop=attrs.anguloaderBackdrop),"true"==backdrop&&element.addClass("anguloader-backdrop"),element.html(element.html()||defaultLoaderSpinner)}}}]).factory("anguloaderHttpInterceptor",["$q","$rootScope",function($q,$rootScope){var loadingCount=0;return{request:function(config){return 1===++loadingCount&&$rootScope.$broadcast("loading:progress"),config},response:function(response){return 0===--loadingCount&&$rootScope.$broadcast("loading:finish"),response},responseError:function(rejection){return 0===--loadingCount&&$rootScope.$broadcast("loading:finish"),$q.reject(rejection)}}}]).config(["$httpProvider",function($httpProvider,$http){$httpProvider.interceptors.push("anguloaderHttpInterceptor")}]).service("anguloaderService",function($rootScope,$timeout){return{show:function(){$rootScope.anguloader={show:!0},$timeout(function(){$rootScope.anguloader={show:!1}},5e3)},hide:function(){$rootScope.anguloader={show:!1}}}}).run(["$rootScope","anguloaderService",function($rootScope,anguloaderService){$rootScope.$on("loading:progress",function(){anguloaderService.show()}),$rootScope.$on("loading:finish",function(){anguloaderService.hide()})}])}();